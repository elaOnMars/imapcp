IMAP4 mailbox copy tool

Usage:
imapcp.py [--move] [--box name] uri_source uri_dest

--move                - move instead of copy
--box name            - copy/move only box named 'name', else - copy all boxes
--ssl                 - use ssl
uri_source / uri_dest - URI: user[:password@host:port]
    if password omitted it will be prompted,
    if host omitted - 'localhost' used
    if port omitted - default IMAP4 port (143) used

Example I - Copy the complete mailbox:
======================================
python imapcp.py --ssl "laura@somemailprovider.com@imap.sourceserver.com:993"  "antonia@somemailprovider.com@imap.targetserver.com:993" 
# As you didn't gave your password here you'll be asked for. Here you can check if the username is parsed correctly.
password for laura@somemailprovider.com: *********
password for antonia@somemailprovider.com: ******
# Now you can get a cup of coffee...
...
29 messages copied from Trash
20 messages copied from INBOX.Family
0 messages copied from Spam
0 messages copied from Queue
2 messages copied from INBOX.Company
2 messages copied from Drafts

Example II - Copy only a specific subfolder:
============================================
For example you have the following folder structure and you want only copy the subfolder 'INBOX.Family'.
├── .INBOX.Family
├── new
└── .Trash
python imapcp.py --ssl --box INBOX.Family "laura@somemailprovider.com@imap.sourceserver.com:993"  "antonia@somemailprovider.com@imap.targetserver.com:993" 


BUG FIX:
========
If you get an exception like:

...
  File "/usr/local/lib/python2.7/imaplib.py", line 1633, in _simple_command
    return self._command_complete(self._command(name, *args), kw)
  File "/usr/local/lib/python2.7/imaplib.py", line 1306, in _command
    % (name, self.state))
imaplib.error: command SEARCH illegal in state AUTH


...then you may change your imapblib.py in the Python module imaplib.py (with super admin rights)
to prevent throwing out this exception. Make a backup of your imaplib.py.

1. cp /usr/local/lib/python2.7/imaplib.py /usr/local/lib/python2.7/imaplib.py~
2. nano /usr/local/lib/python2.7/imaplib.py
3. 'Strg' + 'W'
    Search: illegal in state
4. Uncomment the following lines:
    if self.state not in Commands[name][CMD_VAL_STATES]:
        self.literal = None
        raise self.error('command %s illegal in state %s'
                                    % (name, self.state))

    #if self.state not in Commands[name][CMD_VAL_STATES]:
    #    self.literal = None
    #    raise self.error('command %s illegal in state %s'
    #                        % (name, self.state))
5. Save with 'Strg' + 'O' and quit with 'Strg' + 'X'
6. Start your script again.






